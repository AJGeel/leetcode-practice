var $jscomp={scope:{},checkStringArgs:function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){if(b.get||b.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,d){if(c){b=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in b||(b[e]={});b=b[e]}a=a[a.length-1];d=b[a];c=c(d);c!=d&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6-impl","es3");
var carrouselIMG=document.querySelector(".carrousel__image"),carrouselCaption=document.querySelector(".carrousel__caption"),carrousel={images:[],captions:[],index:0,paused:!1,justChanged:!1,endpoint:{pre:"https://www.reddit.com/r/",subreddit:"aww",response:"/top/.json?t=",time:"all",url:""}},subredditDropdown=document.getElementsByName("subreddit")[0],timeDropdown=document.getElementsByName("time")[0],toggleAutoplayDOM=document.querySelector(".toggleAutoplay");
function fetchGET(a){fetch(a).then(function(a){return a.json()}).then(function(a){0<carrousel.images.length&&(carrousel.images.length=0);0<carrousel.captions.length&&(carrousel.captions.length=0);for(i=0;i<a.data.children.length;i++){var b=a.data.children[i].data.url_overridden_by_dest;b.includes(".jpg")&&(carrousel.images.push(b),carrousel.captions.push(a.data.children[i].data.title))}console.log("Fetch request done.");updateCarrousel()})}
function changeImage(a){carrousel.justChanged=!0;"next"===a?carrousel.index>=carrousel.images.length-1?carrousel.index=0:carrousel.index++:"prev"===a&&(0<carrousel.index?carrousel.index--:carrousel.index=carrousel.images.length-1);updateCarrousel()}function updateCarrousel(){carrouselIMG.src=carrousel.images[carrousel.index];carrouselIMG.parentNode.href=carrousel.images[carrousel.index];carrouselCaption.innerHTML=carrousel.captions[carrousel.index]}
function updateEndpoint(a,c){"subreddit"===a?carrousel.endpoint.subreddit=c:"time"===a&&(carrousel.endpoint.time=c);updateFullUrl();fetchGET(carrousel.endpoint.url)}function updateFullUrl(){var a=carrousel.endpoint;a.url=a.pre+a.subreddit+a.response+a.time}function autoUpdateCarrousel(){1<carrousel.images.length&&!carrousel.paused&&(carrousel.justChanged?carrousel.justChanged=!1:changeImage("next"))}function updateDropdown(a){updateEndpoint(a.name,a.value)}
function toggleAutoplay(){!1===carrousel.paused?(carrousel.paused=!0,toggleAutoplayDOM.classList.add("inactive"),toggleAutoplayDOM.innerHTML="Paused"):(carrousel.paused=!1,toggleAutoplayDOM.classList.remove("inactive"),toggleAutoplayDOM.innerHTML="Autoplay")}subredditDropdown.addEventListener("change",function(){updateDropdown(this)});timeDropdown.addEventListener("change",function(){updateDropdown(this)});toggleAutoplayDOM.addEventListener("click",function(){toggleAutoplay()});updateFullUrl();fetchGET(carrousel.endpoint.url);
setInterval(function(){autoUpdateCarrousel()},5E3);
